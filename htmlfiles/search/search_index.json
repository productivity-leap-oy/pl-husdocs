{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"Introduction_to_HUS_OMOP_ETL/","text":"Remove when ready: https://code.visualstudio.com/docs/languages/markdown side by side Ctrl+K V switch between views, press Ctrl+Shift+V Overview HUS OMOP uses data lake structures as sources. All ETL logic is implemented as stored procedures in the Synapse Analytics database. Sources are accessed via external tables (=a structure that looks like a table in the database but uses a data lake object as storage). The following table shows sources, rows (as of 2023-09-14) and mapping coverage for events and individual codes. System Source n_rows mapped_rows_pct n_source_codes mapped_codes_pct Apotti Apotti/Clarity l\u00e4\u00e4kitys 28467716 87.74 1792 91.24 Apotti Apotti/Tilannekanta diagnoosi 47141633 99.73 10092 97.46 Apotti Apotti/Tilannekanta toimenpide 11973210 79.01 6331 36.52 Kemokur Kemokur oheisl\u00e4\u00e4ke 456857 91.68 94 42.55 Kemokur Kemokur sy\u00f6p\u00e4l\u00e4\u00e4ke 511715 99.99 168 98.21 Marela Marela l\u00e4\u00e4ke 1128969 99.17 711 83.12 Multilab Multilab lis\u00e4tieto 45826069 71.27 575 5.74 Multilab Multilab mikrobitulos 5637900 99.97 1106 98.92 Multilab Multilab tulos 587937883 96.37 6412 16.48 Opera Opera toimenptoimenpideiteet 5503658 95.63 5381 37.39 Uranus Uranus diagnoosi 59964926 99.73 13321 93.00 Uranus Uranus hoitotaulukko 99310280 89.62 527 21.63 Uranus Uranus l\u00e4\u00e4kitys 33214562 95.62 3356 88.32 Uranus Uranus toimenpide 24425487 72.85 6393 35.12 (technical) Use of the Generic intermediate -table In the following pages, ETL has been documented with Rabbit in a Hat tool. It is worth noting that for event type data (excluding visits), only main source-target pairs have been described. Because in OMOP etl, the domain of the mapped standard concept dictates the target table, actual ETL code uses an intermediate table: All event type sources (diagnoses, procedures, medication etc) are first loaded into intermediate table. After all sources have been processed, contents of the intermediate table are loaded into the actual target tables as dictated by the domain of the standard concepts. The main benefit of this strategy is that less code is needed: Each source needs only one loading routine and one loading routine for each target. In traditional OMOP etl each source-target pair requires its own procedure. It is also required to know beforehand all the target domains that vocabulary mappings will use. With the use of intermediate table, target domains are irrelevant at coding time and if target concepts in the vocabulary mappings change to an other domain, this does not require changes in the ETL code. About sources and actual target tables The following tables show where data from each source structure goes. Mapped_rows_pct describes the coverage of the mapping. Each source has a default target based on the nature of the source == diagnosis information is targeted to condition_occurrence if we can\u2019t map the code to a standard concept. Unmapped rows (and codes) lower the mapping coverage percentage of the target that is the default of each source. If a standard concept is found, its domain dictates the target table. Because of this, the following table contains many rows here mapped_rows_pct is 100%. This is not a sign of exceptionally complete vocabulary mapping but just tells us that for example, all rows destined to condition occurrence from Apotti\u2019s procedure source (Apotti/Tilannekanta toimenpide) were loaded as conditions. Because targets are dictated by the domains of the vocabulary mapping target concepts, targets can change over time without the actual ETL changing. Notes about customer data TODO Customer history TODO Excluded patients TODO Notes about visit data TODO hoitojaksot ja k\u00e4ynnit, Uranus ja Apotti, p\u00e4\u00e4llekk\u00e4isyydet Notes about individual medical event sources This section describes for each source - nature of the source - default target - vocabulary mappings used - to what OMOP tables the rows go according to domains of the target concepts in the current (as of 2023-9-14) mappings Apotti/Clarity l\u00e4\u00e4kitys Medication data from Apotti. Contains both prescriptions and drugs ordered(?) during the hospital stay. Default target: drug_exposure Vocabulary mapping: ATC and HUS-kemo-generic It is worth noting that OMOP\u2019s ATC vocabulary comes a little bit behind compared to the ATC classification that is used. Because of this, some really new codes can be left unmapped by ATC. We use mapping by the generic name (\u201cHUS-kemo-generic\u201d) as a failsafe in these situations. Some ATC codes that are used and that are not actual drugs, for example, hand lotions, are missing from the ATC vocabulary and mappings related to that. |Source|domain_as_table|n_rows|mapped_rows_pct|n_source_codes|mapped_codes_pct| |---|---|---|---|---|---| |Apotti/Clarity l\u00e4\u00e4kitys|drug_exposure|28467716|87.74|1792|91.24| Apotti/Tilannekanta diagnoosi Diagnosis data from Apotti. Default target: condition_occurrence Vocabulary mapping: ICD10 and ICD10fi The mapping is based on a combination of FinOMOP developed ICD10fi and international ICD10 vocabulary mappings. ICD10fi contains the national codes that are used only in Finland. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Apotti/Tilannekanta diagnoosi condition_occurrence 42781502 99.70 9229 97.23 Apotti/Tilannekanta diagnoosi Measurement 411739 100.00 80 100.00 Apotti/Tilannekanta diagnoosi observation 3010882 100.00 655 100.00 Apotti/Tilannekanta diagnoosi other Observation:Meas Value 26397 100.00 2 100.00 Apotti/Tilannekanta diagnoosi procedure_occurrence 911113 100.00 126 100.00 Apotti/Tilannekanta toimenpide Procedure data from Apotti. Default target: procedure occurrence Vocabulary mapping: NCSPfi The NCSPfi mapping is developed by the FinOMOP community. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Apotti/Tilannekanta toimenpide condition_occurrence 4 100.00 1 100.00 Apotti/Tilannekanta toimenpide device_exposure 15229 100.00 6 100.00 Apotti/Tilannekanta toimenpide Measurement 37104 100.00 16 100.00 Apotti/Tilannekanta toimenpide observation 1329042 100.00 36 100.00 Apotti/Tilannekanta toimenpide other Observation:Note 60 100.00 1 100.00 Apotti/Tilannekanta toimenpide procedure_occurrence 10591771 76.27 6271 35.91 Kemokur oheisl\u00e4\u00e4ke Additional drugs related to cancer drugs from Kemokur system. Default target: Drug_exposure Vocabulary mappings: HUS-kemo-generic (for drugs) MedsRoute (for drug route) Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Kemokur oheisl\u00e4\u00e4ke drug_exposure 456857 91.68 94 42.55 Kemokur sy\u00f6p\u00e4l\u00e4\u00e4ke Cancer drugs from Kemokur system. Default target: Drug_exposure Vocabulary mappings: HUS-kemo-generic (for drugs) MedsRoute (for drug route) Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Kemokur sy\u00f6p\u00e4l\u00e4\u00e4ke drug_exposure 511715 99.99 168 98.21 Marela l\u00e4\u00e4ke Drug information from Marela Default target: drug_exposure Vocabulary mappings: ATC and HUS-kemo-generic The events are primarily mapped to standard concepts using ATC, but when that fails, generic name mapping is used. There are two reasons for this: - Some drugs are too new to have their ATC codes in the OMOP vocabulary - Research drugs are mapped only using their generic name TODO: Tarvitaan tarkempi kuvaus tutkimusl\u00e4\u00e4kkeiden k\u00e4sittelyst\u00e4. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Marela l\u00e4\u00e4ke drug_exposure 1128969 99.17 711 83.12 Multilab lis\u00e4tieto Description Additional information related to multilab results (Multilab tulos being the main event). Default target: measurement Vocabulary mappings: Lisatiedot Information in this source include things like Myelocytes/100 leukocytes in Blood and Leukocytes [#/volume] in Urine by Automated count. . There are also things like Type of urine collection method . Operator concept is deduced by the value starting with '>', '<', 'alle', 'ali' or 'yli'. Note: There are currently no vocabulary mappings implemented for neither units (no units at the source) or value as concept so this mapping might produce rows with no usable value and none of the measurements from this source will contain an unit. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Multilab lis\u00e4tieto Measurement 45826069 71.27 575 5.74 Multilab mikrobitulos Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Multilab mikrobitulos observation 5637900 99.97 1106 98.92 Multilab tulos Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Multilab tulos Measurement 582621855 96.34 6403 16.37 Multilab tulos observation 39088 100.00 3 100.00 Multilab tulos other Observation:Geography 84954 100.00 1 100.00 Multilab tulos other Observation:Meas Value 7699 100.00 2 100.00 Multilab tulos procedure_occurrence 5184287 100.00 3 100.00 Opera toimenptoimenpideiteet Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Opera toimenptoimenpideiteet device_exposure 4951 100.00 9 100.00 Opera toimenptoimenpideiteet Measurement 532 100.00 7 100.00 Opera toimenptoimenpideiteet observation 52777 100.00 45 100.00 Opera toimenptoimenpideiteet other Observation:Meas Value 234 100.00 6 100.00 Opera toimenptoimenpideiteet other Observation:Route 328 100.00 4 100.00 Opera toimenptoimenpideiteet other Observation:Spec Anatomic Site 750 100.00 1 100.00 Opera toimenptoimenpideiteet procedure_occurrence 5444086 95.58 5309 36.54 Uranus diagnoosi Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus diagnoosi condition_occurrence 54515489 99.70 12592 92.59 Uranus diagnoosi Measurement 1058599 100.00 91 100.00 Uranus diagnoosi observation 2342128 100.00 483 100.00 Uranus diagnoosi other Observation:Meas Value 18919 100.00 2 100.00 Uranus diagnoosi procedure_occurrence 2029791 100.00 153 100.00 Uranus hoitotaulukko Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus hoitotaulukko Measurement 88250380 100.00 112 100.00 Uranus hoitotaulukko observation 11059900 6.79 415 0.48 Uranus l\u00e4\u00e4kitys Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus l\u00e4\u00e4kitys drug_exposure 11072876 93.97 1518 88.47 Uranus l\u00e4\u00e4kitys drug_exposure 22141686 96.44 1838 88.19 Uranus toimenpide Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus toimenpide device_exposure 60844 100.00 11 100.00 Uranus toimenpide Measurement 294411 100.00 21 100.00 Uranus toimenpide observation 2404392 100.00 67 100.00 Uranus toimenpide other Observation:Meas Value 6797 100.00 6 100.00 Uranus toimenpide other Observation:Route 16257 100.00 5 100.00 Uranus toimenpide other Observation:Spec Anatomic Site 28 100.00 1 100.00 Uranus toimenpide procedure_occurrence 21642758 69.35 6282 33.97 Notes about derived tables (observation_period, eras, cdm_source) Observation_period Observation period is constructed by taking first and last day of all event tables and visits. This is best we can do. Ideally we would like to know when all events that happen to person, will occur in HUS data but we don't for example know when persons move to other areas. Some events happen in the future, for example with drug_exposures. These will eventually be filtered out from the omop tables but currently, we use current date for those events when constructing observation_period. drug_era Drug era is populated using a script from OHDSI: https://ohdsi.github.io/CommonDataModel/sqlScripts.html#drug_eras. Currently HUS drugs are mapped in ingredient level but it is possible that mappings will target more detailed levels. When those mappings have been implemented, it is worth knowing that drug_era is constructed at ingredient level -> events at drug_exposure are not necessarily with the same drug concept_ids in the drug_exposure. condition_era Condition era is populated using a script from OHDSI: https://ohdsi.github.io/CommonDataModel/sqlScripts.html#Condition_Eras. cdm_source todo Tecnical notes definitions in DDL structures todo: distribution etc. Gathering statistics The database currently used for HUS main OMOP, Microsoft Synapse Analytics , requires that database statistics are up to date. Without those for example drug_era populating can fail with a tempdb related error. Because of this, a statement to gather statistics has been added to all event table load procedure.","title":"Introduction"},{"location":"Introduction_to_HUS_OMOP_ETL/#overview","text":"HUS OMOP uses data lake structures as sources. All ETL logic is implemented as stored procedures in the Synapse Analytics database. Sources are accessed via external tables (=a structure that looks like a table in the database but uses a data lake object as storage). The following table shows sources, rows (as of 2023-09-14) and mapping coverage for events and individual codes. System Source n_rows mapped_rows_pct n_source_codes mapped_codes_pct Apotti Apotti/Clarity l\u00e4\u00e4kitys 28467716 87.74 1792 91.24 Apotti Apotti/Tilannekanta diagnoosi 47141633 99.73 10092 97.46 Apotti Apotti/Tilannekanta toimenpide 11973210 79.01 6331 36.52 Kemokur Kemokur oheisl\u00e4\u00e4ke 456857 91.68 94 42.55 Kemokur Kemokur sy\u00f6p\u00e4l\u00e4\u00e4ke 511715 99.99 168 98.21 Marela Marela l\u00e4\u00e4ke 1128969 99.17 711 83.12 Multilab Multilab lis\u00e4tieto 45826069 71.27 575 5.74 Multilab Multilab mikrobitulos 5637900 99.97 1106 98.92 Multilab Multilab tulos 587937883 96.37 6412 16.48 Opera Opera toimenptoimenpideiteet 5503658 95.63 5381 37.39 Uranus Uranus diagnoosi 59964926 99.73 13321 93.00 Uranus Uranus hoitotaulukko 99310280 89.62 527 21.63 Uranus Uranus l\u00e4\u00e4kitys 33214562 95.62 3356 88.32 Uranus Uranus toimenpide 24425487 72.85 6393 35.12","title":"Overview"},{"location":"Introduction_to_HUS_OMOP_ETL/#technical-use-of-the-generic-intermediate-table","text":"In the following pages, ETL has been documented with Rabbit in a Hat tool. It is worth noting that for event type data (excluding visits), only main source-target pairs have been described. Because in OMOP etl, the domain of the mapped standard concept dictates the target table, actual ETL code uses an intermediate table: All event type sources (diagnoses, procedures, medication etc) are first loaded into intermediate table. After all sources have been processed, contents of the intermediate table are loaded into the actual target tables as dictated by the domain of the standard concepts. The main benefit of this strategy is that less code is needed: Each source needs only one loading routine and one loading routine for each target. In traditional OMOP etl each source-target pair requires its own procedure. It is also required to know beforehand all the target domains that vocabulary mappings will use. With the use of intermediate table, target domains are irrelevant at coding time and if target concepts in the vocabulary mappings change to an other domain, this does not require changes in the ETL code.","title":"(technical) Use of the Generic intermediate -table"},{"location":"Introduction_to_HUS_OMOP_ETL/#about-sources-and-actual-target-tables","text":"The following tables show where data from each source structure goes. Mapped_rows_pct describes the coverage of the mapping. Each source has a default target based on the nature of the source == diagnosis information is targeted to condition_occurrence if we can\u2019t map the code to a standard concept. Unmapped rows (and codes) lower the mapping coverage percentage of the target that is the default of each source. If a standard concept is found, its domain dictates the target table. Because of this, the following table contains many rows here mapped_rows_pct is 100%. This is not a sign of exceptionally complete vocabulary mapping but just tells us that for example, all rows destined to condition occurrence from Apotti\u2019s procedure source (Apotti/Tilannekanta toimenpide) were loaded as conditions. Because targets are dictated by the domains of the vocabulary mapping target concepts, targets can change over time without the actual ETL changing.","title":"About sources and actual target tables"},{"location":"Introduction_to_HUS_OMOP_ETL/#notes-about-customer-data","text":"TODO","title":"Notes about customer data"},{"location":"Introduction_to_HUS_OMOP_ETL/#customer-history","text":"TODO","title":"Customer history"},{"location":"Introduction_to_HUS_OMOP_ETL/#excluded-patients","text":"TODO","title":"Excluded patients"},{"location":"Introduction_to_HUS_OMOP_ETL/#notes-about-visit-data","text":"TODO hoitojaksot ja k\u00e4ynnit, Uranus ja Apotti, p\u00e4\u00e4llekk\u00e4isyydet","title":"Notes about visit data"},{"location":"Introduction_to_HUS_OMOP_ETL/#notes-about-individual-medical-event-sources","text":"This section describes for each source - nature of the source - default target - vocabulary mappings used - to what OMOP tables the rows go according to domains of the target concepts in the current (as of 2023-9-14) mappings","title":"Notes about individual medical event sources"},{"location":"Introduction_to_HUS_OMOP_ETL/#apotticlarity-laakitys","text":"Medication data from Apotti. Contains both prescriptions and drugs ordered(?) during the hospital stay. Default target: drug_exposure Vocabulary mapping: ATC and HUS-kemo-generic It is worth noting that OMOP\u2019s ATC vocabulary comes a little bit behind compared to the ATC classification that is used. Because of this, some really new codes can be left unmapped by ATC. We use mapping by the generic name (\u201cHUS-kemo-generic\u201d) as a failsafe in these situations. Some ATC codes that are used and that are not actual drugs, for example, hand lotions, are missing from the ATC vocabulary and mappings related to that. |Source|domain_as_table|n_rows|mapped_rows_pct|n_source_codes|mapped_codes_pct| |---|---|---|---|---|---| |Apotti/Clarity l\u00e4\u00e4kitys|drug_exposure|28467716|87.74|1792|91.24|","title":"Apotti/Clarity l\u00e4\u00e4kitys"},{"location":"Introduction_to_HUS_OMOP_ETL/#apottitilannekanta-diagnoosi","text":"Diagnosis data from Apotti. Default target: condition_occurrence Vocabulary mapping: ICD10 and ICD10fi The mapping is based on a combination of FinOMOP developed ICD10fi and international ICD10 vocabulary mappings. ICD10fi contains the national codes that are used only in Finland. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Apotti/Tilannekanta diagnoosi condition_occurrence 42781502 99.70 9229 97.23 Apotti/Tilannekanta diagnoosi Measurement 411739 100.00 80 100.00 Apotti/Tilannekanta diagnoosi observation 3010882 100.00 655 100.00 Apotti/Tilannekanta diagnoosi other Observation:Meas Value 26397 100.00 2 100.00 Apotti/Tilannekanta diagnoosi procedure_occurrence 911113 100.00 126 100.00","title":"Apotti/Tilannekanta diagnoosi"},{"location":"Introduction_to_HUS_OMOP_ETL/#apottitilannekanta-toimenpide","text":"Procedure data from Apotti. Default target: procedure occurrence Vocabulary mapping: NCSPfi The NCSPfi mapping is developed by the FinOMOP community. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Apotti/Tilannekanta toimenpide condition_occurrence 4 100.00 1 100.00 Apotti/Tilannekanta toimenpide device_exposure 15229 100.00 6 100.00 Apotti/Tilannekanta toimenpide Measurement 37104 100.00 16 100.00 Apotti/Tilannekanta toimenpide observation 1329042 100.00 36 100.00 Apotti/Tilannekanta toimenpide other Observation:Note 60 100.00 1 100.00 Apotti/Tilannekanta toimenpide procedure_occurrence 10591771 76.27 6271 35.91","title":"Apotti/Tilannekanta toimenpide"},{"location":"Introduction_to_HUS_OMOP_ETL/#kemokur-oheislaake","text":"Additional drugs related to cancer drugs from Kemokur system. Default target: Drug_exposure Vocabulary mappings: HUS-kemo-generic (for drugs) MedsRoute (for drug route) Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Kemokur oheisl\u00e4\u00e4ke drug_exposure 456857 91.68 94 42.55","title":"Kemokur oheisl\u00e4\u00e4ke"},{"location":"Introduction_to_HUS_OMOP_ETL/#kemokur-syopalaake","text":"Cancer drugs from Kemokur system. Default target: Drug_exposure Vocabulary mappings: HUS-kemo-generic (for drugs) MedsRoute (for drug route) Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Kemokur sy\u00f6p\u00e4l\u00e4\u00e4ke drug_exposure 511715 99.99 168 98.21","title":"Kemokur sy\u00f6p\u00e4l\u00e4\u00e4ke"},{"location":"Introduction_to_HUS_OMOP_ETL/#marela-laake","text":"Drug information from Marela Default target: drug_exposure Vocabulary mappings: ATC and HUS-kemo-generic The events are primarily mapped to standard concepts using ATC, but when that fails, generic name mapping is used. There are two reasons for this: - Some drugs are too new to have their ATC codes in the OMOP vocabulary - Research drugs are mapped only using their generic name TODO: Tarvitaan tarkempi kuvaus tutkimusl\u00e4\u00e4kkeiden k\u00e4sittelyst\u00e4. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Marela l\u00e4\u00e4ke drug_exposure 1128969 99.17 711 83.12","title":"Marela l\u00e4\u00e4ke"},{"location":"Introduction_to_HUS_OMOP_ETL/#multilab-lisatieto","text":"Description Additional information related to multilab results (Multilab tulos being the main event). Default target: measurement Vocabulary mappings: Lisatiedot Information in this source include things like Myelocytes/100 leukocytes in Blood and Leukocytes [#/volume] in Urine by Automated count. . There are also things like Type of urine collection method . Operator concept is deduced by the value starting with '>', '<', 'alle', 'ali' or 'yli'. Note: There are currently no vocabulary mappings implemented for neither units (no units at the source) or value as concept so this mapping might produce rows with no usable value and none of the measurements from this source will contain an unit. Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Multilab lis\u00e4tieto Measurement 45826069 71.27 575 5.74","title":"Multilab lis\u00e4tieto"},{"location":"Introduction_to_HUS_OMOP_ETL/#multilab-mikrobitulos","text":"Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Multilab mikrobitulos observation 5637900 99.97 1106 98.92","title":"Multilab mikrobitulos"},{"location":"Introduction_to_HUS_OMOP_ETL/#multilab-tulos","text":"Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Multilab tulos Measurement 582621855 96.34 6403 16.37 Multilab tulos observation 39088 100.00 3 100.00 Multilab tulos other Observation:Geography 84954 100.00 1 100.00 Multilab tulos other Observation:Meas Value 7699 100.00 2 100.00 Multilab tulos procedure_occurrence 5184287 100.00 3 100.00","title":"Multilab tulos"},{"location":"Introduction_to_HUS_OMOP_ETL/#opera-toimenptoimenpideiteet","text":"Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Opera toimenptoimenpideiteet device_exposure 4951 100.00 9 100.00 Opera toimenptoimenpideiteet Measurement 532 100.00 7 100.00 Opera toimenptoimenpideiteet observation 52777 100.00 45 100.00 Opera toimenptoimenpideiteet other Observation:Meas Value 234 100.00 6 100.00 Opera toimenptoimenpideiteet other Observation:Route 328 100.00 4 100.00 Opera toimenptoimenpideiteet other Observation:Spec Anatomic Site 750 100.00 1 100.00 Opera toimenptoimenpideiteet procedure_occurrence 5444086 95.58 5309 36.54","title":"Opera toimenptoimenpideiteet"},{"location":"Introduction_to_HUS_OMOP_ETL/#uranus-diagnoosi","text":"Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus diagnoosi condition_occurrence 54515489 99.70 12592 92.59 Uranus diagnoosi Measurement 1058599 100.00 91 100.00 Uranus diagnoosi observation 2342128 100.00 483 100.00 Uranus diagnoosi other Observation:Meas Value 18919 100.00 2 100.00 Uranus diagnoosi procedure_occurrence 2029791 100.00 153 100.00","title":"Uranus diagnoosi"},{"location":"Introduction_to_HUS_OMOP_ETL/#uranus-hoitotaulukko","text":"Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus hoitotaulukko Measurement 88250380 100.00 112 100.00 Uranus hoitotaulukko observation 11059900 6.79 415 0.48","title":"Uranus hoitotaulukko"},{"location":"Introduction_to_HUS_OMOP_ETL/#uranus-laakitys","text":"Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus l\u00e4\u00e4kitys drug_exposure 11072876 93.97 1518 88.47 Uranus l\u00e4\u00e4kitys drug_exposure 22141686 96.44 1838 88.19","title":"Uranus l\u00e4\u00e4kitys"},{"location":"Introduction_to_HUS_OMOP_ETL/#uranus-toimenpide","text":"Description TODO. Default target: TODO Vocabulary mappings: TODO Source domain_as_table n_rows mapped_rows_pct n_source_codes mapped_codes_pct Uranus toimenpide device_exposure 60844 100.00 11 100.00 Uranus toimenpide Measurement 294411 100.00 21 100.00 Uranus toimenpide observation 2404392 100.00 67 100.00 Uranus toimenpide other Observation:Meas Value 6797 100.00 6 100.00 Uranus toimenpide other Observation:Route 16257 100.00 5 100.00 Uranus toimenpide other Observation:Spec Anatomic Site 28 100.00 1 100.00 Uranus toimenpide procedure_occurrence 21642758 69.35 6282 33.97","title":"Uranus toimenpide"},{"location":"Introduction_to_HUS_OMOP_ETL/#notes-about-derived-tables-observation_period-eras-cdm_source","text":"","title":"Notes about derived tables (observation_period, eras, cdm_source)"},{"location":"Introduction_to_HUS_OMOP_ETL/#observation_period","text":"Observation period is constructed by taking first and last day of all event tables and visits. This is best we can do. Ideally we would like to know when all events that happen to person, will occur in HUS data but we don't for example know when persons move to other areas. Some events happen in the future, for example with drug_exposures. These will eventually be filtered out from the omop tables but currently, we use current date for those events when constructing observation_period.","title":"Observation_period"},{"location":"Introduction_to_HUS_OMOP_ETL/#drug_era","text":"Drug era is populated using a script from OHDSI: https://ohdsi.github.io/CommonDataModel/sqlScripts.html#drug_eras. Currently HUS drugs are mapped in ingredient level but it is possible that mappings will target more detailed levels. When those mappings have been implemented, it is worth knowing that drug_era is constructed at ingredient level -> events at drug_exposure are not necessarily with the same drug concept_ids in the drug_exposure.","title":"drug_era"},{"location":"Introduction_to_HUS_OMOP_ETL/#condition_era","text":"Condition era is populated using a script from OHDSI: https://ohdsi.github.io/CommonDataModel/sqlScripts.html#Condition_Eras.","title":"condition_era"},{"location":"Introduction_to_HUS_OMOP_ETL/#cdm_source","text":"todo","title":"cdm_source"},{"location":"Introduction_to_HUS_OMOP_ETL/#tecnical-notes","text":"","title":"Tecnical notes"},{"location":"Introduction_to_HUS_OMOP_ETL/#definitions-in-ddl-structures","text":"todo: distribution etc.","title":"definitions in DDL structures"},{"location":"Introduction_to_HUS_OMOP_ETL/#gathering-statistics","text":"The database currently used for HUS main OMOP, Microsoft Synapse Analytics , requires that database statistics are up to date. Without those for example drug_era populating can fail with a tempdb related error. Because of this, a statement to gather statistics has been added to all event table load procedure.","title":"Gathering statistics"},{"location":"condition_occurrence/","text":"Table name: condition_occurrence Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date kontakti_alkuhetki luontihetki ilmoitettu_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadgn If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadgn Use the connected field as is. Reading from tilannekanta_diagnoosi Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadiagnoosi If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadiagnoosi Use the connected field as is.","title":"Condition occurrence"},{"location":"condition_occurrence/#table-name-condition_occurrence","text":"","title":"Table name: condition_occurrence"},{"location":"condition_occurrence/#reading-from-uranus_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date kontakti_alkuhetki luontihetki ilmoitettu_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadgn If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadgn Use the connected field as is.","title":"Reading from uranus_diagnoosi"},{"location":"condition_occurrence/#reading-from-tilannekanta_diagnoosi","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadiagnoosi If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadiagnoosi Use the connected field as is.","title":"Reading from tilannekanta_diagnoosi"},{"location":"death/","text":"Table name: death Reading from all_asiakas Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. death_date kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_datetime kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL. Reading from all_exclude_patients Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. death_date There might be several times of death recorded. Choose the latest time of death. death_datetime There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL.","title":"Death"},{"location":"death/#table-name-death","text":"","title":"Table name: death"},{"location":"death/#reading-from-all_asiakas","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. death_date kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_datetime kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL.","title":"Reading from all_asiakas"},{"location":"death/#reading-from-all_exclude_patients","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. death_date There might be several times of death recorded. Choose the latest time of death. death_datetime There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL.","title":"Reading from all_exclude_patients"},{"location":"device_exposure/","text":"Table name: device_exposure Reading from opera_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERAATIO.pot_eala_koodi to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL. Reading from opera_operaatio Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. device_exposure_start_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. device_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use 0. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date toimenpide_hetki Use the connected field. device_exposure_start_datetime toimenpide_hetki Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. device_exposure_start_datetime luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. tilannekanta_toimenpide: Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use NULL. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Device exposure"},{"location":"device_exposure/#table-name-device_exposure","text":"","title":"Table name: device_exposure"},{"location":"device_exposure/#reading-from-opera_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERAATIO.pot_eala_koodi to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from opera_toimenpide"},{"location":"device_exposure/#reading-from-opera_operaatio","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. device_exposure_start_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. device_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use 0. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from opera_operaatio"},{"location":"device_exposure/#reading-from-tilannekanta_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date toimenpide_hetki Use the connected field. device_exposure_start_datetime toimenpide_hetki Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"device_exposure/#reading-from-uranus_toimenpide","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. device_exposure_start_datetime luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. tilannekanta_toimenpide: Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use NULL. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"drug_exposure/","text":"Table name: drug_exposure Reading from clarity_laakitys Only include rows for which person_id can be found and alkuaika_pvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date alkuaika_pvm loppuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id kirjaaja_toimipiste_eala Joint ot the mapping table with the first word (the substring before the first space) of the connected field to find provider_id if available, otherwise use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find source_domain_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos annostelu_annos_yksikko Use at most the first 50 characters from the combination of annostelu_annos, '/', and annostelu_annos_yksikko. Reading from cressida_laakitys Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id potilasnumero Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date loppuaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason laakemaarays_lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig annostelu_eril_ohje Concatenate the string 'annostelu_eril_ohje:' and the connected field, and use at most the first 8000 characters. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi Join to mapping table using ATC vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos_yksikko Use at most the first 50 characters from the connected field. Reading from marela_pot_laakkeet Only include rows for which person_id can be found. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with the generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). Exception: for the rows where vaikuttava_aine column contains 'kliiniset tutkimus' or 'solunsalpaaja'. The generic name of the effective ingredient is parsed from tuotenimi column. drug_exposure_start_date toimitusaika Use the connected field if available, else use NULL. drug_exposure_start_datetime toimitusaika Use the connected field if available, else use NULL. drug_exposure_end_date toimitusaika Use the connected field. drug_exposure_end_datetime toimitusaika Use the connected field. verbatim_end_date toimitusaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id Use NULL lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi vaikuttava_aine tuotenimi Use atc_koodi if available. Otherwise, if vaikuttava_aine contains 'kliiniset tutkimus' or 'solunsalpaaja', then parse drug_source_value from tuotenimi, else use vaikuttava_aine. In all cases, use at most the first 50 characters. drug_source_concept_id tuotenimi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). route_source_value Use NULL dose_unit_source_value Use NULL. Reading from kemokur Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table and sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date sykli_aloituspvm Use the connected field if available, else use NULL drug_exposure_start_datetime sykli_aloituspvm Use the connected field if available, else use NULL. drug_exposure_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, else use sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason keskeytyksen_syy Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annoskaava_koodi Use at most the first 50 characters from the connected field. Reading from kemokur_oheislaakkeet Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table, the corresponding potilaan_hoitokuuri_numero exists in KEMOKUR table, and KEMOKUR.sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_start_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_end_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date potilaan_hoitokuuri_numero clarity_laakitys: Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value Use NULL.","title":"Drug exposure"},{"location":"drug_exposure/#table-name-drug_exposure","text":"","title":"Table name: drug_exposure"},{"location":"drug_exposure/#reading-from-clarity_laakitys","text":"Only include rows for which person_id can be found and alkuaika_pvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date alkuaika_pvm loppuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id kirjaaja_toimipiste_eala Joint ot the mapping table with the first word (the substring before the first space) of the connected field to find provider_id if available, otherwise use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find source_domain_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos annostelu_annos_yksikko Use at most the first 50 characters from the combination of annostelu_annos, '/', and annostelu_annos_yksikko.","title":"Reading from clarity_laakitys"},{"location":"drug_exposure/#reading-from-cressida_laakitys","text":"Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id potilasnumero Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date loppuaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason laakemaarays_lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig annostelu_eril_ohje Concatenate the string 'annostelu_eril_ohje:' and the connected field, and use at most the first 8000 characters. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi Join to mapping table using ATC vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos_yksikko Use at most the first 50 characters from the connected field.","title":"Reading from cressida_laakitys"},{"location":"drug_exposure/#reading-from-marela_pot_laakkeet","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with the generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). Exception: for the rows where vaikuttava_aine column contains 'kliiniset tutkimus' or 'solunsalpaaja'. The generic name of the effective ingredient is parsed from tuotenimi column. drug_exposure_start_date toimitusaika Use the connected field if available, else use NULL. drug_exposure_start_datetime toimitusaika Use the connected field if available, else use NULL. drug_exposure_end_date toimitusaika Use the connected field. drug_exposure_end_datetime toimitusaika Use the connected field. verbatim_end_date toimitusaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id Use NULL lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi vaikuttava_aine tuotenimi Use atc_koodi if available. Otherwise, if vaikuttava_aine contains 'kliiniset tutkimus' or 'solunsalpaaja', then parse drug_source_value from tuotenimi, else use vaikuttava_aine. In all cases, use at most the first 50 characters. drug_source_concept_id tuotenimi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). route_source_value Use NULL dose_unit_source_value Use NULL.","title":"Reading from marela_pot_laakkeet"},{"location":"drug_exposure/#reading-from-kemokur","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table and sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date sykli_aloituspvm Use the connected field if available, else use NULL drug_exposure_start_datetime sykli_aloituspvm Use the connected field if available, else use NULL. drug_exposure_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, else use sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason keskeytyksen_syy Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annoskaava_koodi Use at most the first 50 characters from the connected field.","title":"Reading from kemokur"},{"location":"drug_exposure/#reading-from-kemokur_oheislaakkeet","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table, the corresponding potilaan_hoitokuuri_numero exists in KEMOKUR table, and KEMOKUR.sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_start_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_end_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date potilaan_hoitokuuri_numero clarity_laakitys: Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value Use NULL.","title":"Reading from kemokur_oheislaakkeet"},{"location":"measurement/","text":"Table name: measurement Reading from opera_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from opera_operaatio Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. measurement_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. measurement_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from tilannekanta_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. measurement_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value uranus_diagnoosi, tilannekanta_diagnoosi, uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, multilab_lisatiedot: Use NULL multilab_tulos, cressida_hoitotaulukkoods: Use the connected field as is. unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi tilannekanta_diagnoosi (HUOM JANNE 13.9.2023: ETL-VERSIOSSA 17.8.2023 T\u00c4T\u00c4 EI VIEL\u00c4 OLLUT, TARKASTETTAVA), measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki Use the connected field as is. uranus_toimenpide: Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_datetime toimenpide_hetki Use the connected field as is. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. tilannekanta_toimenpide measurement_date kontakti_alkuhetki ilmoitettu_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki paivityshetki kontakti_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cresside_hoitotaulukkoods: Use the connected field. measurement_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from multilab_tulos Only include rows for which person_id can be found. Exclude rows for which mikrobitulos is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date measurement_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date and time. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id tulos If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number tulos Parse a numeric value from the connected field. If this cannot be done, then use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'Multilab_tulos' vocabulary to find target_concept_id if available, else use NULL. unit_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. range_low viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '>' or the number preceding '-'. range_high viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '<' or the number following '-'. provider_id Use NULL. visit_detail_id Use NULL. measurement_source_value tutkimus_kuntaliiton_numero Use the connected field. measurement_source_concept_id Use NULL. unit_source_value yksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from load_cressida_hoitotaulukkoods Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC vocabulary with the code '39156-5'. If a match is not found, then use 0. measurement_date tapahtuma_pvm Use the connected field. measurement_datetime Use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Convert the connected field to float if possible, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value suure_koodi suure_koodiston_aihe Concatenate suure_koodiston_aihe, '/', and suure_koodi. If suure_koodiston_aihe is NULL, then use 'LOINC' in place of suure_koodiston_aihe. measurement_source_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value havaintoarvo Use the connected field as is. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from multilab_lisatiedot Only include rows for which person_id can be found and tulos is not 'POISTETTU' or does not contain 'ei tehd' or 'ei onnist' (case ignored). Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id lisatiedon_nimi multilab_lisatiedot: Join to the mapping table with the connected field and with source_vocabulary_id = 'Lisatiedot' to find target_concept_id if available, otherwise use 0. measurement_date naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_datetime naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id lisatiedon_arvo If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number lisatiedon_arvo lisatiedon_nimi Try to convert lisatiedon arvo into a numeric value, possibly preceded by an operator \"<\", \"ali\", \"alle\", \">\", or \"yli\", and join to the mapping table with lisatiedon_nimi and with source_vocabulary_id = 'Lisatiedot'. In case of success, use the converted number, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value lisatiedon_nimi Use the first 50 dharacters from the connected field if available, otherwise use ' ' (a string with a single space). measurement_source_concept_id Use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value tulos lisatiedon_arvo Take the first 50 characters from the string obtained by joining tulos, ' measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Measurement"},{"location":"measurement/#table-name-measurement","text":"","title":"Table name: measurement"},{"location":"measurement/#reading-from-opera_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from opera_toimenpide"},{"location":"measurement/#reading-from-opera_operaatio","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. measurement_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. measurement_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from opera_operaatio"},{"location":"measurement/#reading-from-tilannekanta_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. measurement_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value uranus_diagnoosi, tilannekanta_diagnoosi, uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, multilab_lisatiedot: Use NULL multilab_tulos, cressida_hoitotaulukkoods: Use the connected field as is. unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi tilannekanta_diagnoosi (HUOM JANNE 13.9.2023: ETL-VERSIOSSA 17.8.2023 T\u00c4T\u00c4 EI VIEL\u00c4 OLLUT, TARKASTETTAVA), measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_diagnoosi"},{"location":"measurement/#reading-from-tilannekanta_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki Use the connected field as is. uranus_toimenpide: Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_datetime toimenpide_hetki Use the connected field as is. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"measurement/#reading-from-uranus_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. tilannekanta_toimenpide measurement_date kontakti_alkuhetki ilmoitettu_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki paivityshetki kontakti_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from uranus_diagnoosi"},{"location":"measurement/#reading-from-uranus_toimenpide","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cresside_hoitotaulukkoods: Use the connected field. measurement_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"measurement/#reading-from-multilab_tulos","text":"Only include rows for which person_id can be found. Exclude rows for which mikrobitulos is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date measurement_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date and time. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id tulos If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number tulos Parse a numeric value from the connected field. If this cannot be done, then use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'Multilab_tulos' vocabulary to find target_concept_id if available, else use NULL. unit_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. range_low viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '>' or the number preceding '-'. range_high viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '<' or the number following '-'. provider_id Use NULL. visit_detail_id Use NULL. measurement_source_value tutkimus_kuntaliiton_numero Use the connected field. measurement_source_concept_id Use NULL. unit_source_value yksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from multilab_tulos"},{"location":"measurement/#reading-from-load_cressida_hoitotaulukkoods","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC vocabulary with the code '39156-5'. If a match is not found, then use 0. measurement_date tapahtuma_pvm Use the connected field. measurement_datetime Use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Convert the connected field to float if possible, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value suure_koodi suure_koodiston_aihe Concatenate suure_koodiston_aihe, '/', and suure_koodi. If suure_koodiston_aihe is NULL, then use 'LOINC' in place of suure_koodiston_aihe. measurement_source_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value havaintoarvo Use the connected field as is. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from load_cressida_hoitotaulukkoods"},{"location":"measurement/#reading-from-multilab_lisatiedot","text":"Only include rows for which person_id can be found and tulos is not 'POISTETTU' or does not contain 'ei tehd' or 'ei onnist' (case ignored). Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id lisatiedon_nimi multilab_lisatiedot: Join to the mapping table with the connected field and with source_vocabulary_id = 'Lisatiedot' to find target_concept_id if available, otherwise use 0. measurement_date naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_datetime naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id lisatiedon_arvo If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number lisatiedon_arvo lisatiedon_nimi Try to convert lisatiedon arvo into a numeric value, possibly preceded by an operator \"<\", \"ali\", \"alle\", \">\", or \"yli\", and join to the mapping table with lisatiedon_nimi and with source_vocabulary_id = 'Lisatiedot'. In case of success, use the converted number, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value lisatiedon_nimi Use the first 50 dharacters from the connected field if available, otherwise use ' ' (a string with a single space). measurement_source_concept_id Use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value tulos lisatiedon_arvo Take the first 50 characters from the string obtained by joining tulos, ' measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from multilab_lisatiedot"},{"location":"observation/","text":"Table name: observation Reading from opera_toimenpide Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from opera_operaatio Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. observation_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. opera_toimenpide: Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. observation_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from tilannekanta_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki Use the connected field. observation_datetime toimenpide_hetki Use the connected field. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, cressida_hoitotaulukkoods: Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cressida_hoitotaulukkoods: Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from multilab_tulos Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_datetime naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_type_concept_id Use standard: 32817 EHR. value_as_number tulos Try to parse a numeric value from the connected field and use this value. If this cannot be done, then use NULL. value_as_string Use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id yksikko Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value tutkimus_kuntaliiton_numero Use NULL. unit_source_value yksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from load_cressida_hoitotaulukkoods Only include rows for which person_id can be found. HUOM: T\u00e4ss\u00e4 vain \"left join\", muissa \"join\", voiko person_id j\u00e4\u00e4d\u00e4 NULLiksi? Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use 0 observation_date tapahtuma_pvm Use connected field. observation_datetime Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number havaintoarvo Convert the connected field to float if possible, otherwise use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value suure_koodiston_aihe suure_koodi Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value havaintoarvo Use the connected field as is. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from multilab_mikrobitulos Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id loydos_id Join to the mapping table usign HUS_microbes vocabulary with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_datetime naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string maara Use the first 50 characters of maara if available, otherwise use ' ' (a string containing a single space). value_as_concept_id maara Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value loydos_id mikrobi_nimi Take the first 50 characters from the joint of the strings loydos_id, '/', and mikrobi_nimi, where any unavailable connected field is replaced by ' ' (a string with a single space) instead. observation_source_concept_id Use NULL. unit_source_value Use the connected field as is. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Observation"},{"location":"observation/#table-name-observation","text":"","title":"Table name: observation"},{"location":"observation/#reading-from-opera_toimenpide","text":"Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from opera_toimenpide"},{"location":"observation/#reading-from-opera_operaatio","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. observation_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. opera_toimenpide: Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. observation_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from opera_operaatio"},{"location":"observation/#reading-from-tilannekanta_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_diagnoosi"},{"location":"observation/#reading-from-tilannekanta_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki Use the connected field. observation_datetime toimenpide_hetki Use the connected field. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"observation/#reading-from-uranus_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, cressida_hoitotaulukkoods: Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from uranus_diagnoosi"},{"location":"observation/#reading-from-uranus_toimenpide","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cressida_hoitotaulukkoods: Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"observation/#reading-from-multilab_tulos","text":"Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_datetime naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_type_concept_id Use standard: 32817 EHR. value_as_number tulos Try to parse a numeric value from the connected field and use this value. If this cannot be done, then use NULL. value_as_string Use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id yksikko Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value tutkimus_kuntaliiton_numero Use NULL. unit_source_value yksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from multilab_tulos"},{"location":"observation/#reading-from-load_cressida_hoitotaulukkoods","text":"Only include rows for which person_id can be found. HUOM: T\u00e4ss\u00e4 vain \"left join\", muissa \"join\", voiko person_id j\u00e4\u00e4d\u00e4 NULLiksi? Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use 0 observation_date tapahtuma_pvm Use connected field. observation_datetime Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number havaintoarvo Convert the connected field to float if possible, otherwise use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value suure_koodiston_aihe suure_koodi Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value havaintoarvo Use the connected field as is. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from load_cressida_hoitotaulukkoods"},{"location":"observation/#reading-from-multilab_mikrobitulos","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id loydos_id Join to the mapping table usign HUS_microbes vocabulary with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_datetime naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string maara Use the first 50 characters of maara if available, otherwise use ' ' (a string containing a single space). value_as_concept_id maara Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value loydos_id mikrobi_nimi Take the first 50 characters from the joint of the strings loydos_id, '/', and mikrobi_nimi, where any unavailable connected field is replaced by ' ' (a string with a single space) instead. observation_source_concept_id Use NULL. unit_source_value Use the connected field as is. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from multilab_mikrobitulos"},{"location":"person/","text":"Table name: person Reading from all_asiakas Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. gender_concept_id sukupuoli_koodi If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth syntymaaika_pvm Use the connected field. month_of_birth syntymaaika_pvm Use the connected field. day_of_birth syntymaaika_pvm Use the connected field. birth_datetime syntymaaika_pvm Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value henkilotunnus Use the connected field as is. gender_source_value sukupuoli_koodi Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL. Reading from all_exclude_patients Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. gender_concept_id If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth Use the connected field. month_of_birth Use the connected field. day_of_birth Use the connected field. birth_datetime Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value Use the connected field as is. gender_source_value Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL.","title":"Person"},{"location":"person/#table-name-person","text":"","title":"Table name: person"},{"location":"person/#reading-from-all_asiakas","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. gender_concept_id sukupuoli_koodi If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth syntymaaika_pvm Use the connected field. month_of_birth syntymaaika_pvm Use the connected field. day_of_birth syntymaaika_pvm Use the connected field. birth_datetime syntymaaika_pvm Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value henkilotunnus Use the connected field as is. gender_source_value sukupuoli_koodi Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL.","title":"Reading from all_asiakas"},{"location":"person/#reading-from-all_exclude_patients","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. gender_concept_id If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth Use the connected field. month_of_birth Use the connected field. day_of_birth Use the connected field. birth_datetime Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value Use the connected field as is. gender_source_value Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL.","title":"Reading from all_exclude_patients"},{"location":"procedure_occurrence/","text":"Table name: procedure_occurrence Reading from tilannekanta_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi tJoin to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki Use the connected field. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL. Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL. Reading from multilab_tulos Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id tutkimus_kuntaliiton_numero Join to the mapping table with HUSLAB dictionary and the connected field to find target_concept_id if available, else use 0. procedure_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value tutkimus_kuntaliiton_numero Use the connected field. connected field is replaced by ' ' (a string with a single space) instead. procedure_source_concept_id Use NULL. modifier_source_value Use NULL. Reading from opera_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL modifier_source_value Use NULL. Reading from opera_operaatio Only include rows for which you can join a row in OPERA_TOIMENPIDE using operaatio_tunnus so that there exists person_id matching OPERA_TOIMENPIDE.henkilotunnus. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id operaatio_tunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. modifier_source_value Use NULL.","title":"Procedure occurrence"},{"location":"procedure_occurrence/#table-name-procedure_occurrence","text":"","title":"Table name: procedure_occurrence"},{"location":"procedure_occurrence/#reading-from-tilannekanta_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL.","title":"Reading from tilannekanta_diagnoosi"},{"location":"procedure_occurrence/#reading-from-tilannekanta_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi tJoin to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki Use the connected field. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"procedure_occurrence/#reading-from-uranus_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL.","title":"Reading from uranus_diagnoosi"},{"location":"procedure_occurrence/#reading-from-uranus_toimenpide","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"procedure_occurrence/#reading-from-multilab_tulos","text":"Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id tutkimus_kuntaliiton_numero Join to the mapping table with HUSLAB dictionary and the connected field to find target_concept_id if available, else use 0. procedure_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value tutkimus_kuntaliiton_numero Use the connected field. connected field is replaced by ' ' (a string with a single space) instead. procedure_source_concept_id Use NULL. modifier_source_value Use NULL.","title":"Reading from multilab_tulos"},{"location":"procedure_occurrence/#reading-from-opera_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL modifier_source_value Use NULL.","title":"Reading from opera_toimenpide"},{"location":"procedure_occurrence/#reading-from-opera_operaatio","text":"Only include rows for which you can join a row in OPERA_TOIMENPIDE using operaatio_tunnus so that there exists person_id matching OPERA_TOIMENPIDE.henkilotunnus. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id operaatio_tunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. modifier_source_value Use NULL.","title":"Reading from opera_operaatio"},{"location":"riah_combined/","text":"Source Data Mapping Approach to CDMV5.4 Contents person visit_occurrence condition_occurrence drug_exposure procedure_occurrence device_exposure measurement observation death source_appendix Table name: person Reading from all_asiakas Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. gender_concept_id sukupuoli_koodi If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth syntymaaika_pvm Use the connected field. month_of_birth syntymaaika_pvm Use the connected field. day_of_birth syntymaaika_pvm Use the connected field. birth_datetime syntymaaika_pvm Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value henkilotunnus Use the connected field as is. gender_source_value sukupuoli_koodi Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL. Reading from all_exclude_patients Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. gender_concept_id If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth Use the connected field. month_of_birth Use the connected field. day_of_birth Use the connected field. birth_datetime Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value Use the connected field as is. gender_source_value Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL. Table name: visit_occurrence Reading from uranus_kaynti Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. In neither is available, use NULL. visit_end_datetime alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. If neither is available, use NULL. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL. Reading from uranus_osastohoito Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value tulotapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL. Reading from tilannekanta_osastohoito Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value saapumistapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_lah_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL. Reading from tilannekanta_kaynti Only include rows for which person_id can be found. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value saapumistapa_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL. Table name: condition_occurrence Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date kontakti_alkuhetki luontihetki ilmoitettu_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadgn If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadgn Use the connected field as is. Reading from tilannekanta_diagnoosi Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadiagnoosi If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadiagnoosi Use the connected field as is. Table name: drug_exposure Reading from clarity_laakitys Only include rows for which person_id can be found and alkuaika_pvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date alkuaika_pvm loppuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id kirjaaja_toimipiste_eala Joint ot the mapping table with the first word (the substring before the first space) of the connected field to find provider_id if available, otherwise use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find source_domain_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos annostelu_annos_yksikko Use at most the first 50 characters from the combination of annostelu_annos, '/', and annostelu_annos_yksikko. Reading from cressida_laakitys Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id potilasnumero Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date loppuaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason laakemaarays_lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig annostelu_eril_ohje Concatenate the string 'annostelu_eril_ohje:' and the connected field, and use at most the first 8000 characters. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi Join to mapping table using ATC vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos_yksikko Use at most the first 50 characters from the connected field. Reading from marela_pot_laakkeet Only include rows for which person_id can be found. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with the generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). Exception: for the rows where vaikuttava_aine column contains 'kliiniset tutkimus' or 'solunsalpaaja'. The generic name of the effective ingredient is parsed from tuotenimi column. drug_exposure_start_date toimitusaika Use the connected field if available, else use NULL. drug_exposure_start_datetime toimitusaika Use the connected field if available, else use NULL. drug_exposure_end_date toimitusaika Use the connected field. drug_exposure_end_datetime toimitusaika Use the connected field. verbatim_end_date toimitusaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id Use NULL lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi vaikuttava_aine tuotenimi Use atc_koodi if available. Otherwise, if vaikuttava_aine contains 'kliiniset tutkimus' or 'solunsalpaaja', then parse drug_source_value from tuotenimi, else use vaikuttava_aine. In all cases, use at most the first 50 characters. drug_source_concept_id tuotenimi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). route_source_value Use NULL dose_unit_source_value Use NULL. Reading from kemokur Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table and sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date sykli_aloituspvm Use the connected field if available, else use NULL drug_exposure_start_datetime sykli_aloituspvm Use the connected field if available, else use NULL. drug_exposure_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, else use sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason keskeytyksen_syy Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annoskaava_koodi Use at most the first 50 characters from the connected field. Reading from kemokur_oheislaakkeet Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table, the corresponding potilaan_hoitokuuri_numero exists in KEMOKUR table, and KEMOKUR.sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_start_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_end_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date potilaan_hoitokuuri_numero clarity_laakitys: Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value Use NULL. Table name: procedure_occurrence Reading from tilannekanta_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi tJoin to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki Use the connected field. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL. Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL. Reading from multilab_tulos Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id tutkimus_kuntaliiton_numero Join to the mapping table with HUSLAB dictionary and the connected field to find target_concept_id if available, else use 0. procedure_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value tutkimus_kuntaliiton_numero Use the connected field. connected field is replaced by ' ' (a string with a single space) instead. procedure_source_concept_id Use NULL. modifier_source_value Use NULL. Reading from opera_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL modifier_source_value Use NULL. Reading from opera_operaatio Only include rows for which you can join a row in OPERA_TOIMENPIDE using operaatio_tunnus so that there exists person_id matching OPERA_TOIMENPIDE.henkilotunnus. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id operaatio_tunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. modifier_source_value Use NULL. Table name: device_exposure Reading from opera_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERAATIO.pot_eala_koodi to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL. Reading from opera_operaatio Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. device_exposure_start_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. device_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use 0. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date toimenpide_hetki Use the connected field. device_exposure_start_datetime toimenpide_hetki Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. device_exposure_start_datetime luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. tilannekanta_toimenpide: Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use NULL. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL. Table name: measurement Reading from opera_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from opera_operaatio Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. measurement_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. measurement_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from tilannekanta_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. measurement_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value uranus_diagnoosi, tilannekanta_diagnoosi, uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, multilab_lisatiedot: Use NULL multilab_tulos, cressida_hoitotaulukkoods: Use the connected field as is. unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi tilannekanta_diagnoosi (HUOM JANNE 13.9.2023: ETL-VERSIOSSA 17.8.2023 T\u00c4T\u00c4 EI VIEL\u00c4 OLLUT, TARKASTETTAVA), measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki Use the connected field as is. uranus_toimenpide: Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_datetime toimenpide_hetki Use the connected field as is. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. tilannekanta_toimenpide measurement_date kontakti_alkuhetki ilmoitettu_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki paivityshetki kontakti_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cresside_hoitotaulukkoods: Use the connected field. measurement_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from multilab_tulos Only include rows for which person_id can be found. Exclude rows for which mikrobitulos is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date measurement_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date and time. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id tulos If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number tulos Parse a numeric value from the connected field. If this cannot be done, then use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'Multilab_tulos' vocabulary to find target_concept_id if available, else use NULL. unit_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. range_low viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '>' or the number preceding '-'. range_high viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '<' or the number following '-'. provider_id Use NULL. visit_detail_id Use NULL. measurement_source_value tutkimus_kuntaliiton_numero Use the connected field. measurement_source_concept_id Use NULL. unit_source_value yksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from load_cressida_hoitotaulukkoods Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC vocabulary with the code '39156-5'. If a match is not found, then use 0. measurement_date tapahtuma_pvm Use the connected field. measurement_datetime Use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Convert the connected field to float if possible, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value suure_koodi suure_koodiston_aihe Concatenate suure_koodiston_aihe, '/', and suure_koodi. If suure_koodiston_aihe is NULL, then use 'LOINC' in place of suure_koodiston_aihe. measurement_source_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value havaintoarvo Use the connected field as is. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Reading from multilab_lisatiedot Only include rows for which person_id can be found and tulos is not 'POISTETTU' or does not contain 'ei tehd' or 'ei onnist' (case ignored). Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id lisatiedon_nimi multilab_lisatiedot: Join to the mapping table with the connected field and with source_vocabulary_id = 'Lisatiedot' to find target_concept_id if available, otherwise use 0. measurement_date naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_datetime naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id lisatiedon_arvo If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number lisatiedon_arvo lisatiedon_nimi Try to convert lisatiedon arvo into a numeric value, possibly preceded by an operator \"<\", \"ali\", \"alle\", \">\", or \"yli\", and join to the mapping table with lisatiedon_nimi and with source_vocabulary_id = 'Lisatiedot'. In case of success, use the converted number, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value lisatiedon_nimi Use the first 50 dharacters from the connected field if available, otherwise use ' ' (a string with a single space). measurement_source_concept_id Use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value tulos lisatiedon_arvo Take the first 50 characters from the string obtained by joining tulos, ' measurement_event_id Use NULL. meas_event_field_concept_id Use NULL. Table name: observation Reading from opera_toimenpide Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from opera_operaatio Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. observation_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. opera_toimenpide: Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. observation_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from tilannekanta_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from tilannekanta_toimenpide Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki Use the connected field. observation_datetime toimenpide_hetki Use the connected field. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from uranus_diagnoosi Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, cressida_hoitotaulukkoods: Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from uranus_toimenpide Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cressida_hoitotaulukkoods: Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from multilab_tulos Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_datetime naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_type_concept_id Use standard: 32817 EHR. value_as_number tulos Try to parse a numeric value from the connected field and use this value. If this cannot be done, then use NULL. value_as_string Use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id yksikko Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value tutkimus_kuntaliiton_numero Use NULL. unit_source_value yksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from load_cressida_hoitotaulukkoods Only include rows for which person_id can be found. HUOM: T\u00e4ss\u00e4 vain \"left join\", muissa \"join\", voiko person_id j\u00e4\u00e4d\u00e4 NULLiksi? Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use 0 observation_date tapahtuma_pvm Use connected field. observation_datetime Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number havaintoarvo Convert the connected field to float if possible, otherwise use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value suure_koodiston_aihe suure_koodi Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value havaintoarvo Use the connected field as is. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Reading from multilab_mikrobitulos Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id loydos_id Join to the mapping table usign HUS_microbes vocabulary with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_datetime naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string maara Use the first 50 characters of maara if available, otherwise use ' ' (a string containing a single space). value_as_concept_id maara Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value loydos_id mikrobi_nimi Take the first 50 characters from the joint of the strings loydos_id, '/', and mikrobi_nimi, where any unavailable connected field is replaced by ' ' (a string with a single space) instead. observation_source_concept_id Use NULL. unit_source_value Use the connected field as is. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL. Table name: death Reading from all_asiakas Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. death_date kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_datetime kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL. Reading from all_exclude_patients Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. death_date There might be several times of death recorded. Choose the latest time of death. death_datetime There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL. Appendix: source tables Source truncated","title":"Details by OMOP table"},{"location":"riah_combined/#source-data-mapping-approach-to-cdmv54","text":"","title":"Source Data Mapping Approach to CDMV5.4"},{"location":"riah_combined/#contents","text":"person visit_occurrence condition_occurrence drug_exposure procedure_occurrence device_exposure measurement observation death source_appendix","title":"Contents"},{"location":"riah_combined/#table-name-person","text":"","title":"Table name: person"},{"location":"riah_combined/#reading-from-all_asiakas","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. gender_concept_id sukupuoli_koodi If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth syntymaaika_pvm Use the connected field. month_of_birth syntymaaika_pvm Use the connected field. day_of_birth syntymaaika_pvm Use the connected field. birth_datetime syntymaaika_pvm Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value henkilotunnus Use the connected field as is. gender_source_value sukupuoli_koodi Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL.","title":"Reading from all_asiakas"},{"location":"riah_combined/#reading-from-all_exclude_patients","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have been born, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. gender_concept_id If sukupuoli_koodi = 1, then use 8507 Male, if sukupuoli_koodi = 2, then use 8532 Female, else use 0. year_of_birth Use the connected field. month_of_birth Use the connected field. day_of_birth Use the connected field. birth_datetime Use the connected field. race_concept_id Use 0. ethnicity_concept_id Use 0. location_id Use NULL. provider_id Use NULL. care_site_id Use NULL. person_source_value Use the connected field as is. gender_source_value Use the connected field as is. gender_source_concept_id Use 0. race_source_value Use NULL. race_source_concept_id Use NULL. ethnicity_source_value Use NULL. ethnicity_source_concept_id Use NULL.","title":"Reading from all_exclude_patients"},{"location":"riah_combined/#table-name-visit_occurrence","text":"","title":"Table name: visit_occurrence"},{"location":"riah_combined/#reading-from-uranus_kaynti","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. In neither is available, use NULL. visit_end_datetime alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. If neither is available, use NULL. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from uranus_kaynti"},{"location":"riah_combined/#reading-from-uranus_osastohoito","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value tulotapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from uranus_osastohoito"},{"location":"riah_combined/#reading-from-tilannekanta_osastohoito","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value saapumistapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_lah_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from tilannekanta_osastohoito"},{"location":"riah_combined/#reading-from-tilannekanta_kaynti","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value saapumistapa_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from tilannekanta_kaynti"},{"location":"riah_combined/#table-name-condition_occurrence","text":"","title":"Table name: condition_occurrence"},{"location":"riah_combined/#reading-from-uranus_diagnoosi","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date kontakti_alkuhetki luontihetki ilmoitettu_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadgn If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadgn Use the connected field as is.","title":"Reading from uranus_diagnoosi"},{"location":"riah_combined/#reading-from-tilannekanta_diagnoosi","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field condition_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. condition_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_start_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_start_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. condition_end_date Use NULL. condition_end_datetime Use NULL. condition_type_concept_id Use standard: 32817 EHR. condition_status_concept_id paadiagnoosi If the connected field = 1, then use 32902 Primary diagnosis, if the connected field = 0, then use 32908 Secondary diagnosis, else use NULL. stop_reason Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Join to the mapping table with the connected field to find target_concept_id. If this is not available, then use 0. visit_detail_id Use NULL. condition_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. condition_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. condition_status_source_value paadiagnoosi Use the connected field as is.","title":"Reading from tilannekanta_diagnoosi"},{"location":"riah_combined/#table-name-drug_exposure","text":"","title":"Table name: drug_exposure"},{"location":"riah_combined/#reading-from-clarity_laakitys","text":"Only include rows for which person_id can be found and alkuaika_pvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika_pvm Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika_pvm alkuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date alkuaika_pvm loppuaika_pvm Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id kirjaaja_toimipiste_eala Joint ot the mapping table with the first word (the substring before the first space) of the connected field to find provider_id if available, otherwise use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi vaikuttava_aine Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find source_domain_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos annostelu_annos_yksikko Use at most the first 50 characters from the combination of annostelu_annos, '/', and annostelu_annos_yksikko.","title":"Reading from clarity_laakitys"},{"location":"riah_combined/#reading-from-cressida_laakitys","text":"Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id potilasnumero Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi Join to the mapping table using two vocabularies: ATC with atc_koodi and HUS-kemo-generic with vaikuttava_aine to find target_domain_id if available, otherwise use 0. drug_exposure_start_date alkuaika Use the connected field if available, else use NULL. drug_exposure_start_datetime alkuaika Use the connected field if available, else use NULL. drug_exposure_end_date loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, use NULL. drug_exposure_end_datetime loppuaika alkuaika Use loppuaika_pvm if available, else use alkuaika_pvm. If neither is available, then use NULL. verbatim_end_date loppuaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason laakemaarays_lopetus_syy_selite Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig annostelu_eril_ohje Concatenate the string 'annostelu_eril_ohje:' and the connected field, and use at most the first 8000 characters. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi Use at most the first 50 characters from the connected field. drug_source_concept_id atc_koodi Join to mapping table using ATC vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annostelu_annos_yksikko Use at most the first 50 characters from the connected field.","title":"Reading from cressida_laakitys"},{"location":"riah_combined/#reading-from-marela_pot_laakkeet","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id atc_koodi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with the generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). Exception: for the rows where vaikuttava_aine column contains 'kliiniset tutkimus' or 'solunsalpaaja'. The generic name of the effective ingredient is parsed from tuotenimi column. drug_exposure_start_date toimitusaika Use the connected field if available, else use NULL. drug_exposure_start_datetime toimitusaika Use the connected field if available, else use NULL. drug_exposure_end_date toimitusaika Use the connected field. drug_exposure_end_datetime toimitusaika Use the connected field. verbatim_end_date toimitusaika Use the connected field. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig Use NULL route_concept_id Use NULL lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value atc_koodi vaikuttava_aine tuotenimi Use atc_koodi if available. Otherwise, if vaikuttava_aine contains 'kliiniset tutkimus' or 'solunsalpaaja', then parse drug_source_value from tuotenimi, else use vaikuttava_aine. In all cases, use at most the first 50 characters. drug_source_concept_id tuotenimi vaikuttava_aine Use target_concept_id from the mapping view OHDSI_VOCAB_MAP2. Primary mapping with ATC code (atc_koodi field, source vocabulary ATC), secondary mapping with generic name of the effective ingredient (vaikuttava_aine field, source vocabulary HUS-kemo-generic). route_source_value Use NULL dose_unit_source_value Use NULL.","title":"Reading from marela_pot_laakkeet"},{"location":"riah_combined/#reading-from-kemokur","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table and sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date sykli_aloituspvm Use the connected field if available, else use NULL drug_exposure_start_datetime sykli_aloituspvm Use the connected field if available, else use NULL. drug_exposure_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, else use sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date sykli_viimeinenpvm sykli_aloituspvm Use sykli_viimeinenpvm if available, otherwise use sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason keskeytyksen_syy Use at most the first 20 characters from the connected field. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value annoskaava_koodi Use at most the first 50 characters from the connected field.","title":"Reading from kemokur"},{"location":"riah_combined/#reading-from-kemokur_oheislaakkeet","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table, the corresponding potilaan_hoitokuuri_numero exists in KEMOKUR table, and KEMOKUR.sykli_aloituspvm is available. Destination Field Source field Logic Comment field drug_exposure_id Generated automatically. person_id henkilotunnus Join to mapping table to find person_id with the connected field. drug_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find target_concept_id if available, otherwise use 0. drug_exposure_start_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_start_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_aloituspvm if available, else use NULL. drug_exposure_end_date potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_exposure_end_datetime potilaan_hoitokuuri_numero Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. verbatim_end_date potilaan_hoitokuuri_numero clarity_laakitys: Join to KEMOKUR with the connected field and use KEMOKUR.sykli_viimeinenpvm if available, else use use KEMOKUR.sykli_aloituspvm. If neither is available, use NULL. drug_type_concept_id Use standard: 32817 EHR. stop_reason Use NULL. refills Use NULL. quantity Use NULL. days_supply Use NULL. sig lisatiedot Use at most the first 8000 characters from the connected field. route_concept_id antotapa_selite Joint to the mapping table using MedsRoute vocabulary with the connected field to find target_concept_id if available, otherwise use 0. lot_number Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. drug_source_value geneerinen_nimi Use at most the first 50 characters from the connected field. drug_source_concept_id geneerinen_nimi Join to mapping table using HUS-kemo-generic vocabulary with the connected field to find source_concept_id if available, otherwise use 0. route_source_value antotapa_selite Use at most the first 50 characters from the connected field. dose_unit_source_value Use NULL.","title":"Reading from kemokur_oheislaakkeet"},{"location":"riah_combined/#table-name-procedure_occurrence","text":"","title":"Table name: procedure_occurrence"},{"location":"riah_combined/#reading-from-tilannekanta_diagnoosi_1","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL.","title":"Reading from tilannekanta_diagnoosi"},{"location":"riah_combined/#reading-from-tilannekanta_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi tJoin to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki Use the connected field. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"riah_combined/#reading-from-uranus_diagnoosi_1","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. procedure_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. modifier_source_value Use NULL.","title":"Reading from uranus_diagnoosi"},{"location":"riah_combined/#reading-from-uranus_toimenpide","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. procedure_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. procedure_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. modifier_source_value Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"riah_combined/#reading-from-multilab_tulos","text":"Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id tutkimus_kuntaliiton_numero Join to the mapping table with HUSLAB dictionary and the connected field to find target_concept_id if available, else use 0. procedure_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value tutkimus_kuntaliiton_numero Use the connected field. connected field is replaced by ' ' (a string with a single space) instead. procedure_source_concept_id Use NULL. modifier_source_value Use NULL.","title":"Reading from multilab_tulos"},{"location":"riah_combined/#reading-from-opera_toimenpide","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, then use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. opera_operaatio: Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL modifier_source_value Use NULL.","title":"Reading from opera_toimenpide"},{"location":"riah_combined/#reading-from-opera_operaatio","text":"Only include rows for which you can join a row in OPERA_TOIMENPIDE using operaatio_tunnus so that there exists person_id matching OPERA_TOIMENPIDE.henkilotunnus. Destination Field Source field Logic Comment field procedure_occurrence_id Generated automatically. person_id operaatio_tunnus Join to the mapping table with the connected field to find person_id. procedure_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. procedure_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. procedure_end_date Use NULL. procedure_end_datetime Use NULL. procedure_type_concept_id Use standard: 32817 EHR. modifier_concept_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. procedure_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. procedure_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. modifier_source_value Use NULL.","title":"Reading from opera_operaatio"},{"location":"riah_combined/#table-name-device_exposure","text":"","title":"Table name: device_exposure"},{"location":"riah_combined/#reading-from-opera_toimenpide_1","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERAATIO.operaatio_pvm if available, else use LOAD_AITEAMVIEW_OPERA_OPERAATIO.potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERAATIO.pot_eala_koodi to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from opera_toimenpide"},{"location":"riah_combined/#reading-from-opera_operaatio_1","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. device_exposure_start_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_start_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id Use NULL. visit_detail_id Use NULL. device_source_value operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. device_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use 0. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from opera_operaatio"},{"location":"riah_combined/#reading-from-tilannekanta_toimenpide_1","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date toimenpide_hetki Use the connected field. device_exposure_start_datetime toimenpide_hetki Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use 0. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"riah_combined/#reading-from-uranus_toimenpide_1","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field device_exposure_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. device_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, otherwise use 0. device_exposure_start_date luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, then use NULL. device_exposure_start_datetime luontihetki toimenpide_hetki Use toimenpide_hetki if available, else use luontihetki. tilannekanta_toimenpide: Use the connected field. device_exposure_end_date Use NULL. device_exposure_end_datetime Use NULL. device_type_concept_id Use standard: 32817 EHR. unique_device_id Use NULL. production_id Use NULL. quantity Use 1. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, else use NULL. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. device_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. device_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_concept_id Use NULL. unit_source_value Use NULL. unit_source_concept_id Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"riah_combined/#table-name-measurement","text":"","title":"Table name: measurement"},{"location":"riah_combined/#reading-from-opera_toimenpide_2","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from opera_toimenpide"},{"location":"riah_combined/#reading-from-opera_operaatio_2","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id. If this is not available, then use 0. measurement_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_datetime potilas_saliin operaatio_pvm Use operaatio_pvm if available, else use potilas_saliin. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. measurement_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from opera_operaatio"},{"location":"riah_combined/#reading-from-tilannekanta_diagnoosi_2","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. measurement_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value uranus_diagnoosi, tilannekanta_diagnoosi, uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, multilab_lisatiedot: Use NULL multilab_tulos, cressida_hoitotaulukkoods: Use the connected field as is. unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi tilannekanta_diagnoosi (HUOM JANNE 13.9.2023: ETL-VERSIOSSA 17.8.2023 T\u00c4T\u00c4 EI VIEL\u00c4 OLLUT, TARKASTETTAVA), measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_diagnoosi"},{"location":"riah_combined/#reading-from-tilannekanta_toimenpide_2","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki Use the connected field as is. uranus_toimenpide: Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_datetime toimenpide_hetki Use the connected field as is. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"riah_combined/#reading-from-uranus_diagnoosi_2","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id. If this is not available, then use 0. tilannekanta_toimenpide measurement_date kontakti_alkuhetki ilmoitettu_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_datetime ilmoitettu_alkuhetki paivityshetki kontakti_alkuhetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from uranus_diagnoosi"},{"location":"riah_combined/#reading-from-uranus_toimenpide_2","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cresside_hoitotaulukkoods: Use the connected field. measurement_datetime toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Use NULL. value_as_number Use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. measurement_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. measurement_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value Use NULL measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"riah_combined/#reading-from-multilab_tulos_1","text":"Only include rows for which person_id can be found. Exclude rows for which mikrobitulos is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. measurement_date naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date measurement_datetime naytteenottoaika tekoaika lahetysaika pyyntoaika Use the first one available (in this order) of the following: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date and time. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id tulos If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number tulos Parse a numeric value from the connected field. If this cannot be done, then use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'Multilab_tulos' vocabulary to find target_concept_id if available, else use NULL. unit_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. range_low viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '>' or the number preceding '-'. range_high viitearvot Parse from the connected field (from the substring preseding '/' if this character exists). Use the number following '<' or the number following '-'. provider_id Use NULL. visit_detail_id Use NULL. measurement_source_value tutkimus_kuntaliiton_numero Use the connected field. measurement_source_concept_id Use NULL. unit_source_value yksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from multilab_tulos"},{"location":"riah_combined/#reading-from-load_cressida_hoitotaulukkoods","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. measurement_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC vocabulary with the code '39156-5'. If a match is not found, then use 0. measurement_date tapahtuma_pvm Use the connected field. measurement_datetime Use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id Convert the connected field to float if possible, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value suure_koodi suure_koodiston_aihe Concatenate suure_koodiston_aihe, '/', and suure_koodi. If suure_koodiston_aihe is NULL, then use 'LOINC' in place of suure_koodiston_aihe. measurement_source_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. unit_source_concept_id Use NULL. value_source_value havaintoarvo Use the connected field as is. measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from load_cressida_hoitotaulukkoods"},{"location":"riah_combined/#reading-from-multilab_lisatiedot","text":"Only include rows for which person_id can be found and tulos is not 'POISTETTU' or does not contain 'ei tehd' or 'ei onnist' (case ignored). Destination Field Source field Logic Comment field measurement_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. measurement_concept_id lisatiedon_nimi multilab_lisatiedot: Join to the mapping table with the connected field and with source_vocabulary_id = 'Lisatiedot' to find target_concept_id if available, otherwise use 0. measurement_date naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_datetime naytteenottoaika tekoaika multilab_lisatiedot: Use naytteenottoaika if available, else use tekoaika. If neither is available, then use NULL. measurement_time Use NULL. measurement_type_concept_id Use standard: 32817 EHR. operator_concept_id lisatiedon_arvo If the connected field begins with \"<\", \"ali\", \"alle\", \">\", or \"yli\" and the rest of the field can be converted into a numeric value, then use 4172704 (\">\"). If the connected field begins with \">\" or \"yli\", otherwise use 4171756 (\"<\"). If this interpretation cannot be done, then use NULL. value_as_number lisatiedon_arvo lisatiedon_nimi Try to convert lisatiedon arvo into a numeric value, possibly preceded by an operator \"<\", \"ali\", \"alle\", \">\", or \"yli\", and join to the mapping table with lisatiedon_nimi and with source_vocabulary_id = 'Lisatiedot'. In case of success, use the converted number, otherwise use NULL. value_as_concept_id Use NULL. unit_concept_id Use NULL. range_low Use NULL. range_high Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. measurement_source_value lisatiedon_nimi Use the first 50 dharacters from the connected field if available, otherwise use ' ' (a string with a single space). measurement_source_concept_id Use NULL. unit_source_value Use NULL unit_source_concept_id Use NULL. value_source_value tulos lisatiedon_arvo Take the first 50 characters from the string obtained by joining tulos, ' measurement_event_id Use NULL. meas_event_field_concept_id Use NULL.","title":"Reading from multilab_lisatiedot"},{"location":"riah_combined/#table-name-observation","text":"","title":"Table name: observation"},{"location":"riah_combined/#reading-from-opera_toimenpide_3","text":"Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_tunnus Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id operaatio_tunnus Join to OPERA_OPERAATIO with the connected field, then join to the mapping table with OPERA_OPERATIO.pot_eala_koodi to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from opera_toimenpide"},{"location":"riah_combined/#reading-from-opera_operaatio_3","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find target_concept_id if available, else use 0. observation_date operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. opera_toimenpide: Join to OPERA_OPERAATIO with the connected field and use OPERA_OPERATIO.operaatio_pvm if available, else use OPERA_OPERATIO.potilas_saliin. If neither is available, the use NULL. observation_datetime operaatio_pvm potilas_saliin Use operaatio_pvm if available, else use potilas_saliin. If neither is available, use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then use at most the first 50 characters from OPERA_TOIMENPIDE.toimenpide_koodi. observation_source_concept_id operaatio_tunnus Join to OPERA_TOIMENPIDE with the connected field, then join to NOMESCO mapping table with OPERA_TOIMENPIDE.toimenpide_koodi to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from opera_operaatio"},{"location":"riah_combined/#reading-from-tilannekanta_diagnoosi_3","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki paivityshetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id paadiagnoosi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field if available, else use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_diagnoosi"},{"location":"riah_combined/#reading-from-tilannekanta_toimenpide_3","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki Use the connected field. observation_datetime toimenpide_hetki Use the connected field. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id palvelutuote_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from tilannekanta_toimenpide"},{"location":"riah_combined/#reading-from-uranus_diagnoosi_3","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find target_concept_id if available, else use 0. observation_date ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_datetime ilmoitettu_alkuhetki kontakti_alkuhetki luontihetki Use the first available (in this order) from kontakti_alkuhetki, ilmoitettu_alkuhetki, paivityshetki. If none of these is avalable, then use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id, and map this by a valid 'Maps to value' relationship to find value_as_concept_id. If this is not available, then use NULL. uranus_toimenpide, tilannekanta_toimenpide, opera_toimenpide, opera_operaatio, cressida_hoitotaulukkoods: Use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id palvelu_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value diagnoosi_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id diagnoosi_koodi Join to ICD10 mapping table with the connected field without a possible \"combination character\" ('*','&','#','+') at the end to find source_concept_id. If this is not available, then use 0. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from uranus_diagnoosi"},{"location":"riah_combined/#reading-from-uranus_toimenpide_3","text":"Only include rows for which person_id can be found and toteuttanut_jarjestelma is not 'OPERA'. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find target_concept_id if available, else use 0 observation_date toimenpide_hetki luontihetki Use toimenpide_hetki if available, else use luontihetki. If neither is available, use NULL. cressida_hoitotaulukkoods: Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string Use NULL. value_as_concept_id Use NULL qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id. visit_occurrence_id kontakti_numero Automatically generated in VISIT_INTERMEDIATE. Join to this table using the connected field. If not available, then use NULL. visit_detail_id Use NULL. observation_source_value toimenpide_koodi Use at most the first 50 characters from the connected field. observation_source_concept_id toimenpide_koodi Join to NOMESCO mapping table with the connected field to find source_concept_id if available, else use NULL. unit_source_value Use NULL. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from uranus_toimenpide"},{"location":"riah_combined/#reading-from-multilab_tulos_2","text":"Only include rows for which person_id can be found. Exclude rows for which mikrobituloksia is not NULL, tulos = 'POISTETTU', tulos = 'PYYDETTY', tulos contains a substring 'ei tehd', tulos contains a substring 'ei onnist', naytteenottoaika is available, but is not after 1700-01-01 00:00:00.0000000, or l\u00e4hetysaika is available, but is not after 1700-01-01 00:00:00.0000000. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id tutkimus_kuntaliiton_numero Join to HUSLAB mapping table with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_datetime naytteenottoaika pyyntoaika tekoaika lahetysaika Use the first one of the following which is available: naytteenottoaika, tekoaika, lahetysaika, pyyntoaika. If none of these is available, then use the current date. observation_type_concept_id Use standard: 32817 EHR. value_as_number tulos Try to parse a numeric value from the connected field and use this value. If this cannot be done, then use NULL. value_as_string Use NULL. value_as_concept_id tulos Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id yksikko Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value tutkimus_kuntaliiton_numero Use NULL. unit_source_value yksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value tulos Use the connected field if available, otherwise use an empty string. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from multilab_tulos"},{"location":"riah_combined/#reading-from-load_cressida_hoitotaulukkoods_1","text":"Only include rows for which person_id can be found. HUOM: T\u00e4ss\u00e4 vain \"left join\", muissa \"join\", voiko person_id j\u00e4\u00e4d\u00e4 NULLiksi? Destination Field Source field Logic Comment field observation_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. observation_concept_id suure_koodi suure_koodiston_aihe Join to the mapping table primarily using the connected fields to find target_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use 0 observation_date tapahtuma_pvm Use connected field. observation_datetime Use NULL. observation_type_concept_id Use standard: 32817 EHR. value_as_number havaintoarvo Convert the connected field to float if possible, otherwise use NULL. value_as_string Use NULL. value_as_concept_id Use NULL. qualifier_concept_id Use NULL. unit_concept_id suure_mittayksikko Join to the mapping table with the connected field and with 'HUS_UNIT' to find target_concept_id if available, otherwise use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value suure_koodiston_aihe suure_koodi Join to the mapping table primarily using the connected fields to find source_concept_id. However, if suure_koodi = 'BMI' and suure_koodiston_aihe is not available, then join using LOINC with the code '39156-5'. If a match is not found, then use NULL. unit_source_value suure_mittayksikko Use the connected field as is. qualifier_source_value Use NULL. value_source_value havaintoarvo Use the connected field as is. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from load_cressida_hoitotaulukkoods"},{"location":"riah_combined/#reading-from-multilab_mikrobitulos","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field observation_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. observation_concept_id loydos_id Join to the mapping table usign HUS_microbes vocabulary with the connected field to find target_concept_id if available, else use 0. observation_date naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_datetime naytteenottoaika tekoaika Use naytteenottoaika if available, otherwise use tekoaika. observation_type_concept_id Use standard: 32817 EHR. value_as_number Use NULL. value_as_string maara Use the first 50 characters of maara if available, otherwise use ' ' (a string containing a single space). value_as_concept_id maara Join to the mapping table with the connected field using 'HUS_UNIT' vocabulary to find target_concept_id if available, else use NULL. qualifier_concept_id Use NULL. unit_concept_id Use NULL. provider_id Use NULL. visit_occurrence_id Use NULL. visit_detail_id Use NULL. observation_source_value loydos_id mikrobi_nimi Take the first 50 characters from the joint of the strings loydos_id, '/', and mikrobi_nimi, where any unavailable connected field is replaced by ' ' (a string with a single space) instead. observation_source_concept_id Use NULL. unit_source_value Use the connected field as is. qualifier_source_value Use NULL. value_source_value Use NULL. observation_event_id Use NULL. obs_event_field_concept_id Use NULL.","title":"Reading from multilab_mikrobitulos"},{"location":"riah_combined/#table-name-death","text":"","title":"Table name: death"},{"location":"riah_combined/#reading-from-all_asiakas_1","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id henkilotunnus Join to the mapping table with the connected field to find person_id. death_date kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_datetime kuolinaika_pvm There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL.","title":"Reading from all_asiakas"},{"location":"riah_combined/#reading-from-all_exclude_patients_1","text":"Include all persons from ALL_ASIAKAS that can be found in the mapping table, have died, and are not in ALL_EXCLUDE_PATIENTS. There might be several updates for person's data. Use the latest one. Destination Field Source field Logic Comment field person_id Join to the mapping table with the connected field to find person_id. death_date There might be several times of death recorded. Choose the latest time of death. death_datetime There might be several times of death recorded. Choose the latest time of death. death_type_concept_id Use standard: 32817 EHR. cause_concept_id Use NULL. cause_source_value Use NULL. cause_source_concept_id Use NULL.","title":"Reading from all_exclude_patients"},{"location":"riah_combined/#appendix-source-tables","text":"","title":"Appendix: source tables"},{"location":"riah_combined/#source-truncated","text":"","title":"Source truncated"},{"location":"riah_index/","text":"Source Data Mapping Approach to CDMV5.4 Contents person visit_occurrence condition_occurrence drug_exposure procedure_occurrence device_exposure measurement observation death source_appendix","title":"RiaH original"},{"location":"riah_index/#source-data-mapping-approach-to-cdmv54","text":"","title":"Source Data Mapping Approach to CDMV5.4"},{"location":"riah_index/#contents","text":"person visit_occurrence condition_occurrence drug_exposure procedure_occurrence device_exposure measurement observation death source_appendix","title":"Contents"},{"location":"source_appendix/","text":"Appendix: source tables Source truncated","title":"Appendix: source tables"},{"location":"source_appendix/#appendix-source-tables","text":"","title":"Appendix: source tables"},{"location":"source_appendix/#source-truncated","text":"","title":"Source truncated"},{"location":"visit_occurrence/","text":"Table name: visit_occurrence Reading from uranus_kaynti Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. In neither is available, use NULL. visit_end_datetime alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. If neither is available, use NULL. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL. Reading from uranus_osastohoito Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value tulotapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL. Reading from tilannekanta_osastohoito Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value saapumistapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_lah_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL. Reading from tilannekanta_kaynti Only include rows for which person_id can be found. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value saapumistapa_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Visit occurrence"},{"location":"visit_occurrence/#table-name-visit_occurrence","text":"","title":"Table name: visit_occurrence"},{"location":"visit_occurrence/#reading-from-uranus_kaynti","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. In neither is available, use NULL. visit_end_datetime alkuhetki loppuhetki Use loppuhetki if available, else use alkuhetki. If neither is available, use NULL. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from uranus_kaynti"},{"location":"visit_occurrence/#reading-from-uranus_osastohoito","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id potilasnumero Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value tulotapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jh_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from uranus_osastohoito"},{"location":"visit_occurrence/#reading-from-tilannekanta_osastohoito","text":"Only take rows for which the person exists in PERSON_ID_FOR_ASIAKAS table. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9201 Inpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value saapumistapa_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value mista_lah_tuli_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from tilannekanta_osastohoito"},{"location":"visit_occurrence/#reading-from-tilannekanta_kaynti","text":"Only include rows for which person_id can be found. Destination Field Source field Logic Comment field visit_occurrence_id Generated automatically. person_id henkilotunnus Join to the mapping table with the connected field to find person_id. visit_concept_id Use standard: 9202 Outpatient Visit. visit_start_date alkuhetki Use the connected field. visit_start_datetime alkuhetki Use the connected field. visit_end_date loppuhetki Use the connected field if available, otherwise use the current date. visit_end_datetime loppuhetki Use the connected field if available, otherwise use the current date. visit_type_concept_id Use standard: 32817 EHR. provider_id pot_eala_koodi Join to the mapping table with the connected field to find provider_id if available, otherwise use NULL. care_site_id vo_toimipiste_koodi Join to the mapping table with the connected field to find care_site_id if available, otherwise use NULL. visit_source_value kayntityyppi_selite Use the connected field as is. visit_source_concept_id Use 0. admitted_from_concept_id Use NULL. admitted_from_source_value saapumistapa_selite Take at most the first 50 characters from the connected field. discharged_to_concept_id Use NULL. discharged_to_source_value jatkohoito_selite Take at most the first 50 characters from the connected field. preceding_visit_occurrence_id Use NULL.","title":"Reading from tilannekanta_kaynti"}]}